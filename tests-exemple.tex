\documentclass[12pt,a4paper, rulers%,correction
]{tests}
% Si vous ajoutez l'option "logo", la case pour les noms est remplacée
% par un logo.  Utilisez \settestlogo{nom du fichier} pour le
% déclarer.  Le défaut est "UMONS+txt".
%
% L'option "correction" indique que c'est une correction et imprime
% les questions en italique.  Le contenu des environnements « answer »
% sont affichés.  Dans ce cas, si le nom, le prénom ou la section sont
% spécifiés, la boite avec ces informations continue de s'afficher.
% Si vous ne le voulez pas, déclarez ces informations dans
% \iftestscorrection\else ... \fi.

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{times,mathptmx}
\usepackage[french]{babel}
\usepackage{verbatim}
%\usepackage{amssymb}
%\usepackage{pifont}

\testtitle[Intitulé du cours (autres pages)]{Intitulé du cours (page~1)}
\testnumber{2}% écrira "Test n°2"
%\exam % pour les examens
%\cote % pour tes exercices cotés
%\testtype{Type de test}
\testdate{16 août 2019}

% S'il n'y a pas de section pour vos étudiants, vous pouvez utiliser
% « \testsectionfalse » (avant \begin{document} ou avant \maketitle)
% pour désactiver cette demande dans la boite « Nom, Prénom, Section »
% (« \testsectiontrue » permet de rétablir les sections.)

% \testauthor{Votre nom} % Pour les métadonnées PDF
% \testlastname{Nom de l'étudiant} % Pour des tests spécifiques
% \testfirstname{Prénom (étudiant)}% Pour des tests spécifiques
% \testsection{Section (étudiant)} % Pour une section spécifique
% \testsectionfalse % N'affiche pas de « section »
%%% À l'intérieur d'un test, ces informations sont stockées dans
%%% \studentlastname, \studentfirstname et \studentsection, ce qui
%%% permet d'activer certaines options pour des étudiants spécifiques.


\begin{filecontents*}{tests-exemple.csv}
Nom, Prenom, matricule, edo, droite, c
Leblanc, Sophie, 23452, 1, 2
       , Alexandre, 12345, 2, 1, 42
Spécial$, $Virg#i~n{,}i^e%, 12121, 1, 1, \pi
\end{filecontents*}

\setlength{\parskip}{1ex}

\begin{document}
\begin{abstract}
  L'environnement \verb+abstract+ vous permet de donner des
  consignes générales (durée, matériel alloué ou non,...) pour la
  passation du test.
\end{abstract}


\begin{question}[(Caractérisation de la question)]<4>
  % [...] permet un « titre » comme pour les théorèmes (optionnel)
  % <...> Les points sur lesquels la question est cotée (optionnel)
  Cœur de la question.
\end{question}

\begin{question*}
  Continuation de la question précédente, typiquement sur une autre
  page.
\end{question*}


\begin{question}[(Vrai/Faux)]
  \begin{TrueFalse}
  \item Une affirmation sur laquelle on doit se prononcer.
  \item[true] Ici la réponse «~vraie~» est cochée (utile pour les
    corrections)
  \item[false] Ici la réponse «~faux~» est cochée (utile pour les
    corrections)
  \end{TrueFalse}
  Le symbole utilisé pour cocher est différent si le package
  \verb+amssymb+ ou \verb+pifont+ est installé.  Vous pouvez aussi
  (re)définir \verb+\checkmark+ (défini par \verb+amssymb+).

  Il suffit d'ajouter une étoile à la fin du nom de l'environnement
  pour supprimer la numérotation :
  \begin{TrueFalse*}
  \item Une affirmation sur laquelle on doit se prononcer.
  \item[true] Ici la réponse «~vraie~» est cochée (utile pour les
    corrections)
  \item[false] Ici la réponse «~faux~» est cochée (utile pour les
    corrections)
  \end{TrueFalse*}
\end{question}

\newpage

\part{Questions de réflexion}

\begin{question}
  Une autre question (sans points).  On doit choisir la bonne réponse :
  \begin{choices}
  \item La terre est plate.
  \item La terre est sphérique.
  \end{choices}
  ou sans numérotation :
  \begin{choices*}
  \item La terre est plate.
  \item La terre est sphérique.
  \end{choices*}
\end{question}

Ci-dessous, il y a une réponse.  Elle est visible uniquement si
l'option «~\verb+correction+~» est passée à \verb+\documentclass+.
\begin{answer}
  Réponse à la question précédente.  Vous pouvez aussi utiliser
  \verb+\inlineanswer{...}+ pour une réponse dans la question elle
  même (par exemple si la question demande de compléter certains
  éléments de son texte).
\end{answer}

Vous pouvez aussi utiliser «~\verb+\iftestscorrection+
contenu-si-correction \verb+\else+ contenu-si-pas-correction
\verb+\fi+~» pour (dés)activer certaines parties ou certaines options
selon que le document est en mode correction ou non.

\vspace{3ex}

\begin{namequestion}{edo}% 1ʳᵉ question "edo"
  % Tout ce qui est dans cet environnement n'apparaît pas directement.
  % Il est juste sauvegardé pour plus tard.
  \begin{question}
    Résolvez l'équation différentielle $u'' = 1$.

    Vous pouvez récupérer le nom (resp.\ le prénom) de l'étudiant
    grâce à \texttt{\textbackslash studentlastname} (resp.\
    \texttt{\textbackslash studentfirstname}).  La section est dans
    \texttt{\textbackslash studentsection}. Ici :
    \begin{itemize}
    \item \texttt{\textbackslash studentlastname} $\to$ \studentlastname
    \item \texttt{\textbackslash studentfirstname} $\to$ \studentfirstname
    \item \texttt{\textbackslash studentsection} $\to$ \studentsection
    \end{itemize}
  \end{question}
\end{namequestion}
\begin{namequestion}{edo}% 2ᵉ question "edo"
  \begin{question}
    Résolvez l'équation différentielle $u'' = u$.
  \end{question}
\end{namequestion}

\namedquestion{edo}{2}
\namedquestion{edo}{1}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Vous pouvez changer les options que vous voulez
\testtitle{Cours \#2}
\exam
%\testsectionfalse
\testsection{Enseignants}% Aucun effet si \testsectionfalse est décommenté
\maketitle % Nouveau test

\begin{question}
  Première question du second test.
\end{question}

\namedquestion{edo}{2}

\begin{namequestion}{droite}
  \begin{question}
    Donnez la pente de la droite $x + y = \CSV{c}$.
  \end{question}
\end{namequestion}
\begin{namequestion}{droite}
  \begin{question}
    Donnez un vecteur directeur de la droite $x + y = 1$.    
  \end{question}
\end{namequestion}

\newpage
Le fichier CSV suivant
\verbatiminput{tests-exemple.csv}
va générer les tests ci-dessous.  En général, celui-ci est produit
par un programme externe (par exemple libreoffice avec
\verb+RANDBETWEEN(a,b)+ pour répartir les variantes aléatoirement).
La première ligne est composée des noms des
colonnes avec impérativement au moins «~Nom~», «~Prenom~» (sans
accent), éventuellement «~Section~», et les noms des questions (ici
«~edo~» et «~droite~») du test.

La colonne «~c~» ne donne par le n° d'une variante de question mais
peut être utilisée via \verb+\CSV{c}+ dans une question pour la
paramétrer avec la valeur de cette colonne.  (Ceci est donc uniquement
accessible dans les \verb+namequestion+ qui sont utilisées via
\verb+\generatetestsfromCSV+.)

\generatetestsfromCSV{tests-exemple.csv}{edo, droite}


\end{document}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% ispell-local-dictionary: "fr"
%%% End:
